<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Test Rotation</title>
    <script src="../js/classes/world_objects/Drop.js"></script>
    <script src="../js/classes/world_objects/GameObject.js"></script>
    <script src="../js/classes/world_objects/Snappable.js"></script>
    <script src="../js/classes/world_objects/LiquidContainer.js"></script>

    <script src="../js/classes/Liquid.js"></script>
    <script src="../js/classes/world_objects/tanks/Tank.js"></script>
    <script src="../js/classes/world_objects/pipes/Pipe.js"></script>
    <script src="../js/classes/world_objects/pipes/ElbowPipe.js"></script>
    <script src="../js/classes/world_objects/pipes/Valve.js"></script>
    <script src="../js/classes/world_objects/pipes/Faucet.js"></script>
    <script src="../lib/jquery-1.11.3.min.js"></script>
    <script src="../lib/D3/d3.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        var elbow = new ElbowPipe(
          {
            x: 100, y: 100
          },
          30, //diameter
          100, //lengthFromCorner
          5
        )

        var tank = new Tank(
          {x: 100, y: 100},
          50,
          100,
          5
        )

        var pipe1 = new Pipe(
          {x: 100, y:100},
          30,
          100,
          5
        )

        pipe1.createSVG()
        tank.createSVG()
        tank.updateSVG()
        pipe1.updateSVG()
        d3.select("body")
          .on("keypress", function() {
            if(d3.event.key = 'r') {
              pipe1.rotate()
              console.log(pipe1.rotation);
            }
          })

        d3.select("body")
          .on("mousemove", function() {
            let mousePos = {x: d3.mouse(this)[0], y: d3.mouse(this)[1]}

            //pipe1.moveRelativeToCenter(mousePos)
            pipe1.moveRelativeToCenter({
              x: mousePos.x - pipe1.getWidth() / 2,
              y: mousePos.y - pipe1.getHeight() / 2
            })
          })
  		});
    </script>
  </head>

  <body>
    <svg id="main" height="600" width="1750">
    </svg>
  </body>
</html>
